(this["webpackJsonpsound-visualizer"]=this["webpackJsonpsound-visualizer"]||[]).push([[0],{24:function(e,t,a){e.exports=a(34)},28:function(e,t,a){},29:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=(a(28),a(29),a(3)),i=a(10),u=a(18),s=a(4),m=a(23),p=a(1),d=function(e){var t=e.index,a=Object(n.useContext)(f)[t]/100;return r.a.createElement("mesh",{position:[0,0,Math.max(0,a)]},r.a.createElement("ringBufferGeometry",{attach:"geometry",args:[.3*t+1.3,.3*t+1.2,6]}),r.a.createElement("meshToonMaterial",{attach:"material",color:"hsl(".concat(128*a,",100%, 50%)"),side:p.DoubleSide}))},f=Object(n.createContext)(),h=function(e){var t=e.num,a=e.analyser,c=e.player,o=e.play,u=Object(m.a)(e,["num","analyser","player","play"]),h=Object(n.useRef)(),y=Object(n.useState)((function(){return Array(t).fill(0)})),b=Object(l.a)(y,2),E=b[0],g=b[1];return Object(i.b)((function(){if(a){var e=new Uint8Array(a.frequencyBinCount);a.getByteFrequencyData(e),g(e)}})),r.a.createElement("mesh",Object.assign({ref:h,position:[0,0,0],rotation:[0,0,0]},u),r.a.createElement("sphereBufferGeometry",{attach:"geometry",args:[90]}),r.a.createElement("meshToonMaterial",{attach:"material",color:"hsl(".concat(Math.max.apply(Math,Object(s.a)(E))+100,", 100%, 50%)"),side:p.BackSide}),!c.current.playing&&r.a.createElement("mesh",{onClick:o},r.a.createElement("ringBufferGeometry",{attach:"geometry",args:[1,.3,3]}),r.a.createElement("meshLambertMaterial",{attach:"material",color:"hsl(".concat(Math.max.apply(Math,Object(s.a)(E)),", 100%, 50%)"),side:p.DoubleSide})),c.current.playing&&r.a.createElement("group",{position:[0,0,Math.max.apply(Math,Object(s.a)(E))/100],onClick:o},r.a.createElement("mesh",{position:[-.3,0,0]},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[.3,1]}),r.a.createElement("meshToonMaterial",{attach:"material",color:"hsl(".concat(Math.max.apply(Math,Object(s.a)(E)),", 100%, 50%)"),side:p.DoubleSide})),r.a.createElement("mesh",{position:[.3,0,0]},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[.3,1]}),r.a.createElement("meshToonMaterial",{attach:"material",color:"hsl(".concat(Math.max.apply(Math,Object(s.a)(E)),", 100%, 50%)"),side:p.DoubleSide}))),r.a.createElement(f.Provider,{value:E},function(e){for(var t=[],a=0;a<e;a++)t.push(r.a.createElement(d,{key:"danc".concat(t.length),index:t.length}));return t}(t)))};var y=function(){var e=Object(i.c)(),t=e.camera,a=e.gl;return Object(n.useEffect)((function(){var e=new u.a(t,a.domElement);return e.minDistance=3,e.maxDistance=20,function(){e.dispose()}}),[t,a]),null},b=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useRef)({playing:!1,pausedAt:0,playedAt:0}),u=Object(n.useState)(16),s=Object(l.a)(u,2),m=s[0],p=s[1],d=Object(n.useState)("Fearless"),f=Object(l.a)(d,2),b=f[0],E=f[1],g=Object(n.useRef)(new(window.AudioContext||window.webkitAudioContext)),v=Object(n.useRef)(g.current.createAnalyser()),j=Object(n.useRef)(null),O=Object(n.useRef)(null);Object(n.useEffect)((function(){var e;v.current.fftSize=2*(e=m,Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}),[m]),Object(n.useEffect)((function(){return fetch("/"+b+".mp3").then((function(e){e.arrayBuffer().then((function(e){g.current.decodeAudioData(e).then((function(e){O.current=e,c(!0)}))}))})),function(){o.current.playing&&x(),O.current=null,o.current={playing:!1,pausedAt:0,playedAt:0}}}),[b]);var x=Object(n.useCallback)((function(){if(o.current.playing)o.current.pausedAt=g.current.currentTime-o.current.playedAt,j.current.stop();else{var e=g.current.createBufferSource();e.buffer=O.current,e.connect(v.current),v.current.connect(g.current.destination),j.current=e,j.current.start(0,o.current.pausedAt),o.current.playedAt=g.current.currentTime-o.current.pausedAt}return o.current.playing=!o.current.playing}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{color:"black",position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:10}},r.a.createElement("button",{style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.1em",color:"#222"},onClick:function(){o.current.playing&&x(),o.current={playing:!1,pausedAt:0,playedAt:0},x()}},"Replay"),r.a.createElement("select",{style:{background:"none",border:"2px solid",borderRadius:"3px",fontSize:"1.1em"},onChange:function(e){E(e.target.value)}},r.a.createElement("option",{value:"Fearless",defaultChecked:!0},"Lost Sky - Fearless [NCS Release]"),r.a.createElement("option",{value:"Invincible"},"DEAF KEV - Invincible _NCS Release_")),r.a.createElement("select",{style:{background:"none",border:"2px solid",borderRadius:"3px",fontSize:"1.1em"},onChange:function(e){p(e.target.value)}},r.a.createElement("option",{value:16,defaultChecked:!0},"16"),r.a.createElement("option",{value:32},"32"),r.a.createElement("option",{value:64},"64"),r.a.createElement("option",{value:128},"128"),r.a.createElement("option",{value:256},"256"))),r.a.createElement(i.a,{pixelRatio:window.devicePixelRatio,invalidateFrameloop:!1,style:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"},camera:{position:[0,-2,3]}},r.a.createElement(y,null),r.a.createElement("ambientLight",null),r.a.createElement("pointLight",{position:[0,0,20],color:16711680}),r.a.createElement("pointLight",{position:[-20,0,20],color:65280}),r.a.createElement("pointLight",{position:[20,0,20],color:255}),r.a.createElement("directionalLight",{position:[0,0,20],lookAt:[4,4,4],color:16711680}),a&&r.a.createElement(h,{num:m,analyser:v.current,player:o,play:x})),r.a.createElement("span",{style:{position:"absolute",zIndex:1e3,bottom:0,left:0}},"Music Provided By ",r.a.createElement("a",{href:"https://ncsmusic.com/"},"NoCopyrightSounds")))};var E=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.c5aae7a0.chunk.js.map